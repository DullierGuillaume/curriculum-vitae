<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CV Guillaume Dullier</title>
  <style>
    @font-face{font-family:'Rawest';src:url('assets/Rawest-SemiBold.otf') format('opentype');font-weight:600;font-style:normal}
    body{margin:0;will-change:background-position;font-family:system-ui,sans-serif;background:url("assets/jojocv_page-0001.jpg") center top/cover no-repeat}
    #infos,h1,h2{font-family:'Rawest',system-ui,sans-serif}
    #infos{position:fixed;top:1rem;left:1rem;z-index:10;background:#ffffffcc;padding:.5rem 1rem;border-radius:.5rem}
    .viewer{box-sizing:border-box;width:100%;max-width:800px;height:500px;margin:120px auto 2rem;border:2px solid #ddd;border-radius:.75rem;box-shadow:0 4px 12px rgba(0,0,0,.1);background:#e5e7eb;overflow:hidden}
    .viewer.cvbox{box-sizing:border-box;height:auto;overflow:visible;background:rgba(255,255,255,0.65);backdrop-filter:blur(2px);padding:1rem;margin:1rem auto;}
    @media(min-width:601px){
      .viewer{margin:120px auto 4rem;} 
      .viewer.cvbox{margin:2rem auto 3rem;}
    }
    @media(max-width:600px){
      #infos{left:50%;transform:translateX(-50%);top:.5rem;padding:.4rem .8rem;text-align:center}
      body{padding-top:50vw}
      .viewer{height:50vw;margin:90px auto 1.5rem;border-width:1px}
      #viewer1{display:none}
    }
    .wa-btn img{height:2.2em;vertical-align:-0.2em;margin-left:.25em}
    /* espace de fond pour desktop */
    .spacer{display:none}
    @media(min-width:601px){
      .spacer{display:block;height:80vh}
    }

    /* Styles pour la section Expériences */
    #frame-experiences ul{list-style:none;margin:0;padding:0}
    #frame-experiences li{display:grid;grid-template-columns:120px 1fr;column-gap:10px;margin-bottom:.5em}
    #frame-experiences .date{text-align:left;font-family:monospace}
    #frame-experiences .job{text-align:justify;}
    #frame-competences ul {padding-left: 0;list-style-type: none;}
    #frame-competences li {display: flex;justify-content: space-between;max-width: 300px; margin-bottom: 0.5em;}

.stars {
  margin-left: 1em;
}

    /* Styles du carrousel - Mobile par défaut */
  .carrousel-container {
    width: 100%;
    max-width: 800px;
    margin: 2rem auto;
    overflow: hidden;
    text-align: center;
  }

  .carrousel-wrapper {
    position: relative;
    display: flex;
    align-items: center;
  }

  .carrousel {
    display: flex;
    scroll-snap-type: x mandatory;
    overflow-x: auto;
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
    border-radius: 0.5rem;
    background: rgba(255, 255, 255, 0.7);
    backdrop-filter: blur(2px);
    padding-bottom: 8px;
  }

  .carrousel-slide {
    flex: 0 0 100%;
    scroll-snap-align: start;
    cursor: pointer;
  }

  .carrousel-slide img {
    width: 100%;
    height: auto;
    max-height: 300px;
    object-fit: contain;
    padding: 0.5rem;
    transition: transform 0.3s ease;
  }

  .carrousel-slide img:hover {
    transform: scale(1.02);
  }

  .carrousel-arrow {
    position: absolute;
    z-index: 1;
    background: rgba(255,255,255,0.7);
    border: none;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    font-size: 24px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    backdrop-filter: blur(2px);
    transition: all 0.3s ease;
  }

  .carrousel-arrow:hover {
    background: rgba(255,255,255,0.9);
    transform: scale(1.1);
  }

  .left-arrow {
    left: 10px;
  }

  .right-arrow {
    right: 10px;
  }

  /* Modal pour l'agrandissement des images */
  .modal {
    display: none;
    position: fixed;
    z-index: 100;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.9);
    overflow: auto;
  }

  .modal-content {
    margin: auto;
    display: block;
    width: 90%;
    max-width: 800px;
    max-height: 90vh;
    object-fit: contain;
    animation: zoom 0.3s;
  }

  .modal-nav {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 100%;
    display: flex;
    justify-content: space-between;
    padding: 0 20px;
    box-sizing: border-box;
  }

  .modal-arrow {
    color: white;
    font-size: 50px;
    cursor: pointer;
    background: rgba(0,0,0,0.3);
    border-radius: 50%;
    width: 60px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    user-select: none;
    transition: all 0.3s;
  }

  .modal-arrow:hover {
    background: rgba(0,0,0,0.5);
    transform: scale(1.1);
  }

  .close {
    position: absolute;
    top: 15px;
    right: 35px;
    color: #f1f1f1;
    font-size: 40px;
    font-weight: bold;
    transition: 0.3s;
    cursor: pointer;
  }

  .close:hover {
    color: #bbb;
  }

  @keyframes zoom {
    from {transform: scale(0.5);}
    to {transform: scale(1);}
  }

  @media (max-width: 600px) {
    .carrousel-arrow {
      width: 30px;
      height: 30px;
      font-size: 18px;
    }
    
    .modal-content {
      width: 95%;
    }
    
    .close {
      font-size: 30px;
      top: 10px;
      right: 20px;
    }
    
    .modal-arrow {
      font-size: 30px;
      width: 40px;
      height: 40px;
    }
    
    .carrousel-slide img {
      max-height: 250px;
    }
  }

  /* Version Desktop (écrans > 600px) */
  @media (min-width: 601px) {
    .carrousel-slide img {
      max-height: 600px;
    }
  }

  /* Style de la barre de défilement */
  .carrousel::-webkit-scrollbar {
    height: 8px;
  }
  .carrousel::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.1);
    border-radius: 4px;
  }
  .carrousel::-webkit-scrollbar-thumb {
    background: rgba(0, 0, 0, 0.3);
    border-radius: 4px;
  }
  .carrousel::-webkit-scrollbar-thumb:hover {
    background: rgba(0, 0, 0, 0.5);
  }
  </style>
  <script type="importmap">
    {"imports":{"three":"https://cdn.jsdelivr.net/npm/three@0.177.0/build/three.module.js","three/addons/":"https://cdn.jsdelivr.net/npm/three@0.177.0/examples/jsm/"}}
  </script>
</head>
<body>
  <div id="infos"><h1>Guillaume Dullier</h1>
    <p>BIM Modeleur • 41 ans • </p>
    <p><a href="https://wa.me/33610262935" target="_blank" rel="noopener">06 10 26 29 35</a> •</p>
    <p><a href="mailto:guillaumedullier@hotmail.fr">guillaumedullier@hotmail.fr</a></p></div>
  <div id="viewer1" class="viewer"></div>
  <div id="viewer2" class="viewer"></div>
  <div id="viewer3" class="viewer"></div>
  <div id="frame-formations" class="viewer cvbox"><h2>Formations</h2><p><strong>2025</strong> – Titre professionnel <em>BIM Modeleur du Bâtiment</em> (Bac+2)</p><p><strong>2014</strong> – CAP Menuisier d’agencement</p></div>
 <div id="frame-competences" class="viewer cvbox">
  <h2>Compétences</h2>
  <ul>
    <li><span>Revit</span> <span class="stars">★★★★☆</span></li>
    <li><span>Metashape</span> <span class="stars">★★★☆☆</span></li>
    <li><span>PostShot</span> <span class="stars">★★☆☆☆</span></li>
    <li><span>AutoCAD </span> <span class="stars">★★☆☆☆</span></li>
    <li><span>Vectorworks</span> <span class="stars">★★☆☆☆</span></li>
    <li><span>Reality Capture</span> <span class="stars">★★☆☆☆</span></li>
    <li><span>Suite Adobe</span> <span class="stars">★★☆☆☆</span></li>
    <li><span>Recap</span> <span class="stars">★☆☆☆☆</span></li>
    <li><span>Blender</span> <span class="stars">★☆☆☆☆</span></li>
  </ul>
</div>
    <div id="frame-langues" class="viewer cvbox">
      <h2>Langues &amp; Permis</h2>
      <p> •Anglais – compréhension écrite avancée : Lecture au quotidien de contenus variés : documentations techniques, tutoriels, rapports open source et papiers de recherche.</p>
      <p> •Permis B</p>
      <h2>Centres d'intérêt</h2>
      <p> Photogrammétrie, Gaussian Splatting, Edge detection, Cyclisme de loisir, </p>
    </div>
    <div id="frame-experiences" class="viewer cvbox"><h2>Expériences</h2><ul>
      <li><span class="date">09/2024   12/2024 </span><span class="job"><strong>Appuis ponctuels – <em>Edouard de Vimal Architecte</em></strong></span></li>
      <li><span class="date">06/2022   05/2023 </span><span class="job"><strong>Charpentier – <em>Alliance Bois Métal</em></strong></span></li>
      <li><span class="date">05/2021   02/2022 </span><span class="job"><strong>Agent de production – <em>21 Degrés Sud</em></strong></span></li>
      <li><span class="date">03/2017   03/2020 </span><span class="job"><strong>Menuisier cintreur – <em>Formalis</em></strong></span></li>
      <li><span class="date">01/2016   12/2016 </span><span class="job"><strong>Réhabilitation – <em>Particulier</em></strong></span></li>
      <li><span class="date">09/2015   11/2015 </span><span class="job"><strong>Pressage fermettes/ossature bois – <em>COBA</em></strong></span></li>
      <li><span class="date">03/2015   08/2015 </span><span class="job"><strong>Menuisier – <em>Société Santailer</em></strong></span></li>
      <li><span class="date">09/2014   11/2014 </span><span class="job"><strong>Stagiaire – <em>Menuiserie Pourtaud Yohan</em></strong></span></li>
      <li><span class="date">2013 </span><span class="job"><strong>Technicien – <em>Alex Cobas, designer, artiste(42)</em></strong></span></li>
      <li><span class="date">2011 2012 </span><span class="job"><strong>Interimaire – <em>Affaires à suivre, événementiel.</em></strong></span></li>
      <li><span class="date">2009 2010 </span><span class="job"><strong>Facteur d'équipe – <em>La Poste</em></strong></span></li>
      <li><span class="date">2008 2009 </span><span class="job"><strong>Opérateur de saisie – <em>Police Technique et scientifique</em></strong></span></li>
    </ul></div>

  <!-- Nouvelle section Carrousel avec flèches -->
  <div class="carrousel-container">
    <h2>Portfolio</h2>
    <div class="carrousel-wrapper">
      <button class="carrousel-arrow left-arrow" aria-label="Diapositive précédente">&#10094;</button>
      <div class="carrousel">
        <div class="carrousel-slide">
          <img src="assets/coupechape.jpg" alt="Projet BIM 1">
        </div>
        <div class="carrousel-slide">
          <img src="assets/coupe portique.jpg" alt="Projet BIM 2">
        </div>
        <div class="carrousel-slide">
          <img src="assets/coupe chape_02.jpg" alt="Projet BIM 3">
        </div>
        <div class="carrousel-slide">
          <img src="assets/dossierP01.jpg" alt="Projet BIM 4">
        </div>
        <div class="carrousel-slide">
          <img src="assets/dossierP02.jpg" alt="Projet BIM 5">
        </div>
        <div class="carrousel-slide">
          <img src="assets/dossierP03.jpg" alt="Projet BIM 6">
        </div>
        <div class="carrousel-slide">
          <img src="assets/dossierP04.jpg" alt="Projet BIM 7">
        </div>
        <div class="carrousel-slide">
          <img src="assets/dossierP05.jpg" alt="Projet BIM 8">
        </div>
        <div class="carrousel-slide">
          <img src="assets/dossierP06.jpg" alt="Projet BIM 9">
        </div>
      </div>
      <button class="carrousel-arrow right-arrow" aria-label="Diapositive suivante">&#10095;</button>
    </div>
    <div style="text-align: center; background: #f9f9f9; padding: 15px; border-radius: 8px; max-width: 500px; margin: 30px auto;">
    <p style="margin: 0; font-weight: 500;">Merci d'être arrivé·e jusqu'ici ! 🎉</p>
    <p style="margin: 8px 0 0; font-size: 0.9em; color: #777;">
        Merci de votre intérêt
    </p>
</div>
  </div>

  <!-- Modal pour l'agrandissement des images -->
  <div id="imageModal" class="modal">
    <span class="close">&times;</span>
    <div class="modal-nav">
      <span class="modal-arrow left-modal-arrow">&#10094;</span>
      <span class="modal-arrow right-modal-arrow">&#10095;</span>
    </div>
    <img class="modal-content" id="modalImage">
  </div>

  <script type="module">
    import * as THREE from 'three';
    import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
    import { OBJLoader } from 'three/addons/loaders/OBJLoader.js';
    import { PLYLoader } from 'three/addons/loaders/PLYLoader.js';
    const Z = new THREE.Vector3(0,0,1);
    
    // Version avec limitation du scroll
    const enableParallax = () => {
      if (window.innerWidth > 600) {
        const factor = 1.2;
        const lastElement = document.querySelector('.carrousel-container');
        let maxScroll = lastElement.offsetTop + lastElement.offsetHeight - window.innerHeight;

        const updateMaxScroll = () => {
          maxScroll = lastElement.offsetTop + lastElement.offsetHeight - window.innerHeight;
        };

        const onScroll = () => {
          const scrollY = Math.min(window.scrollY, maxScroll);
          document.body.style.backgroundPositionY = -(scrollY * factor) + "px";
          
          if (window.scrollY > maxScroll) {
            window.scrollTo(0, maxScroll);
          }
        };

        window.addEventListener('scroll', onScroll, { passive: true });
        window.addEventListener('resize', updateMaxScroll);
        onScroll();
      }
    };
    enableParallax();

    function viewer(id, file, { rotateZ = false, scale = 1, offsetYRatio = 0 } = {}) {
      const c = document.getElementById(id);
      const scene = new THREE.Scene(); scene.background = new THREE.Color(0xf6f6f9);
      const cam = new THREE.PerspectiveCamera(45, 1, 0.1, 1000); cam.position.set(0, 1, 5);
      const renderer = new THREE.WebGLRenderer({ antialias: true }); c.appendChild(renderer.domElement);
      const ctl = new OrbitControls(cam, renderer.domElement); ctl.enableDamping = true;
      scene.add(new THREE.AmbientLight(0xffffff, 0.6));
      const dl = new THREE.DirectionalLight(0xffffff, 0.6); dl.position.set(2, 4, 2); scene.add(dl);
      const rez = () => { const w = c.clientWidth, h = c.clientHeight; cam.aspect = w / h; cam.updateProjectionMatrix(); renderer.setSize(w, h); };
      rez(); window.addEventListener('resize', rez);
      const loader = file.endsWith('.ply') ? new PLYLoader() : new OBJLoader();
      loader.setPath('assets/');
      let piv = null, obj = null;
      loader.load(file, (m) => {
        if (file.endsWith('.ply')) {
          const g = m; g.computeBoundingBox();
          const hasCol = g.hasAttribute('color');
          const len = g.boundingBox.getSize(new THREE.Vector3()).length();
          const mat = new THREE.PointsMaterial({ size: len * 0.002, sizeAttenuation: true, vertexColors: hasCol, color: hasCol ? undefined : 0xffffff });
          obj = new THREE.Points(g, mat); piv = new THREE.Group(); piv.add(obj); piv.rotation.x = -Math.PI / 2; scene.add(piv);
        } else {
          obj = m; obj.traverse(n => { if (n.isMesh && !n.material) n.material = new THREE.MeshStandardMaterial({ color: 0xcccccc }); });
          scene.add(obj);
        }
        const tgt = piv || obj;
        const box = new THREE.Box3().setFromObject(tgt);
        const size = box.getSize(new THREE.Vector3()).length();
        const ctr = box.getCenter(new THREE.Vector3());
        if (scale !== 1) tgt.scale.setScalar(scale);
        const dist = size / (2 * Math.tan((cam.fov * Math.PI) / 360)) * 1.2;
        cam.position.set(0, 0, dist).add(ctr);
        ctl.target.copy(ctr); ctl.update(); cam.near = dist / 100; cam.far = dist * 100; cam.updateProjectionMatrix();
        if (offsetYRatio) tgt.position.y -= size * offsetYRatio;
      }, undefined, err => { console.error('Loader error', err); });
      const ani = () => { requestAnimationFrame(ani); if (rotateZ) { if (piv) piv.rotation.z -= 0.01; else if (obj) obj.rotateOnWorldAxis(Z, -0.01); } ctl.update(); renderer.render(scene, cam); };
      ani();
    }

    viewer('viewer1', '6969 - Cloud.subsampled.ply', { rotateZ: true });
    document.getElementById('viewer2').innerHTML = '<iframe src="assets/cv-viewer9.html" style="border:0;width:100%;height:100%;" loading="lazy"></iframe>';
    viewer('viewer3', '6969 - Cloud.subsampled.ply', { rotateZ: true, scale: 1.8, offsetYRatio: 0.125 });

    // Script pour le carrousel et la modal
    document.addEventListener('DOMContentLoaded', () => {
      // Variables globales
      const carrousel = document.querySelector('.carrousel');
      const slides = document.querySelectorAll('.carrousel-slide');
      const leftArrow = document.querySelector('.left-arrow');
      const rightArrow = document.querySelector('.right-arrow');
      const modal = document.getElementById('imageModal');
      const modalImg = document.getElementById('modalImage');
      const closeBtn = document.querySelector('.close');
      const leftModalArrow = document.querySelector('.left-modal-arrow');
      const rightModalArrow = document.querySelector('.right-modal-arrow');
      
      let currentSlideIndex = 0;
      const slideCount = slides.length;
      const slideWidth = carrousel.clientWidth;

      // Fonction pour mettre à jour les flèches du carrousel
      const updateArrows = () => {
        leftArrow.style.display = carrousel.scrollLeft <= 10 ? 'none' : 'flex';
        rightArrow.style.display = carrousel.scrollLeft >= carrousel.scrollWidth - carrousel.clientWidth - 10 ? 'none' : 'flex';
      };

      // Navigation du carrousel principal
      leftArrow.addEventListener('click', () => {
        carrousel.scrollBy({ left: -slideWidth, behavior: 'smooth' });
      });

      rightArrow.addEventListener('click', () => {
        carrousel.scrollBy({ left: slideWidth, behavior: 'smooth' });
      });

      // Navigation de la modal
      leftModalArrow.addEventListener('click', (e) => {
        e.stopPropagation();
        currentSlideIndex = (currentSlideIndex - 1 + slideCount) % slideCount;
        updateModalImage();
      });

      rightModalArrow.addEventListener('click', (e) => {
        e.stopPropagation();
        currentSlideIndex = (currentSlideIndex + 1) % slideCount;
        updateModalImage();
      });

      // Mettre à jour l'image dans la modal
      function updateModalImage() {
        const imgSrc = slides[currentSlideIndex].querySelector('img').src;
        const imgAlt = slides[currentSlideIndex].querySelector('img').alt;
        modalImg.src = imgSrc;
        modalImg.alt = imgAlt;
      }

      // Ouvrir la modal avec l'image cliquée
      slides.forEach((slide, index) => {
        slide.addEventListener('click', () => {
          currentSlideIndex = index;
          modal.style.display = 'block';
          updateModalImage();
        });
      });

      // Fermer la modal
      closeBtn.addEventListener('click', () => {
        modal.style.display = 'none';
      });

      // Fermer la modal en cliquant à l'extérieur
      modal.addEventListener('click', (e) => {
        if (e.target === modal) {
          modal.style.display = 'none';
        }
      });

      // Navigation au clavier
      document.addEventListener('keydown', (e) => {
        if (modal.style.display === 'block') {
          if (e.key === 'Escape') {
            modal.style.display = 'none';
          } else if (e.key === 'ArrowLeft') {
            currentSlideIndex = (currentSlideIndex - 1 + slideCount) % slideCount;
            updateModalImage();
          } else if (e.key === 'ArrowRight') {
            currentSlideIndex = (currentSlideIndex + 1) % slideCount;
            updateModalImage();
          }
        }
      });

      // Écouteur de défilement pour le carrousel
      carrousel.addEventListener('scroll', updateArrows);
      updateArrows();
    });
  </script>
  <div class="spacer"></div>
</body>
</html>
